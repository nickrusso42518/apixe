---
- name: "PLAY 1: Intermediate-level infrastructure-as-code"
  hosts: routers
  connection: network_cli
  tasks:
    - name: "TASK 1: Apply VPN using specialized 'ios_vrf' module"
      ios_vrf:
        vrfs: "{{ vrfs }}"
      notify: config_changed
      register: cli_result

  handlers:
    - name: "HANDLER 1: Display commands to be sent to device"
      listen: config_changed
      debug:
        msg: "{{ cli_result.commands }}"
